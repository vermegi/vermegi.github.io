---
title: "Building a cross platform solution for Windows Phone and Windows 8."
subtitle: "Part V: Binding events to commands"
layout: "post"
permalink: "/2013/12/building-cross-platform-solution-for_23.html"
uuid: "5838873552156311642"
guid: "tag:blogger.com,1999:blog-4315928131887373364.post-5838873552156311642"
date: "2013-12-23 13:48:00"
updated: "2013-12-23 13:48:20"
description: 
blogger:
    siteid: "4315928131887373364"
    postid: "5838873552156311642"
    comments: "0"
categories: [MVVM, Windows Phone, Windows 8, cross platform]
author: "Gitte Vermeiren"
header-img: "img/mobile.jpg"
---

<div class="css-full-post-content js-full-post-content">
In the previous part of this series, we did quite a lot. We mocked out any application differences in our ViewModels, we introduced dependency injection and we created base classes for our platform specific pages.<br /><br />This part will be less complicated, but will again contain a very necessary part if you want to end up with a reusable framework for your Windows Phone and Windows 8 applications. Up until now we have created Views that we can databind to our ViewModels. For this our ViewModels contain either data properties or command properties. It is with this last kind of properties you might have some issues in databinding scenarios. And this doesn't only go for cross platform applications, you will have this issue every time you want to take the MVVM approach.<br /><br />The thing with command properties is that, out of the box, they are only databindable to, well, Commands. So, a button for instance, poses no problem, since it has a Command property. But what if, for instance, you wish to trigger a command based on a Tap event. This will not be possible by default. But, you can provide some extra pipe-lining to make this possible nonetheless.<br /><br />What we'll do to get around this, is write our own TriggerAction. A TriggerAction describes an action to perform by a trigger. The good thing is that you can attach a TriggerAction to an EventTrigger. An EventTrigger will then execute your TriggerAction based on a certain event.<br /><br />To get all this working, first thing you will have to do is add a reference to the Systems.Windows.Interactivity namespace. On Windows Phone you can find this reference under Assembly - Extensions (I had to look for it too). For Windows 8 you will not find this assembly in your references, but you can use <a href="https://www.nuget.org/packages/Windows.UI.Interactivity">this</a>&nbsp;nuget package.<br /><br />Once you've done this, you will find you can add an EventTrigger for any event you would like. In the following example I have added one for the Tap event on a Border control.<br /><br /><script src="https://gist.github.com/vermegi/8007182.js"></script><br /><br />Next step, now that we have our EventTrigger, is write a TriggerAction that translates our event to a command. This is actually not that hard. You notice in the code sample above I use a framework:EventToCommand type, which I provided myself. This is my TriggerAction which has one property, Command. It looks like this.<br /><br /><script src="https://gist.github.com/vermegi/8007201.js"></script><br /><br />This class inherits from a TriggerAction for a FrameworkElement (this is just the base class for all possible controls). The first line registers my Command property as a DependencyProperty. This is needed so you can assign values to this property from within your XAML. That is also why, in the actual property, you see the use of GetValue and SetValue - that is just because we are using a DependencyProperty.<br /><br />The Invoke method in my EventToCommand is more important. It gets executed each time the associated event gets fired. What it does is, it looks wether the Command can be executed and when it does, it executes the Command.<br /><br />With this, you can more or less databind anything in your views. More or less, because if you want to databind your application bar in a Windows Phone application, you will have to go through some extra effort, which involves a lot more code. You can get a pointer to what needs to be done <a href="http://bindableapplicationb.codeplex.com/">here</a>.<br /><br />Next part, I will show you another little trick to easily react to orientation changes.<br /><br />Other parts in this series:<br /><br /><a href="http://proq.blogspot.be/2013/12/building-cross-platform-solution-for.html">Part 0: Intro</a><br /><a href="http://proq.blogspot.be/2013/12/building-cross-platform-solution-for_2.html">Part I: Quick sharing of code</a><br /><a href="http://proq.blogspot.be/2013/12/building-cross-platform-solution-for_3.html">Part II: The class library approach</a><br /><a href="http://proq.blogspot.be/2013/12/building-cross-platform-solution-for_8.html">Part III: We need a pattern</a><br /><a href="http://proq.blogspot.be/2013/12/building-cross-platform-solution-for_15.html">Part IV: Mocking out the differences</a><br />Part V: Event to command<br />Part VI: Behaviors for coping with orientation changes<br />Part VII: Tombstoning<br /><div><br /></div>
</div>